<div class="card">
  <div class="card-header">
    <span *ngIf="id==0">
      <i class="fa fa-user-plus"></i>
      <strong>{{'vif.user.title2' | translate}}</strong>
    </span>
    <span *ngIf="id>0">
      <i class="fa fa-user"></i>
      <strong>{{'vif.user.title3' | translate}}</strong>
    </span>

  </div>
  <!--[Start] Create User-->
  <form *ngIf="customers.length>0" [formGroup]="addUserForm" (ngSubmit)="onAddSubmit()">
    <div class="card-body" *ngIf="id==0">
      <div class="row">
        <div class="col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.username' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <input type="text" formControlName="username" class="form-control" id="username-id"
                  placeholder="{{'vif.user.username_placeholder' | translate}}">
                <div *ngIf="addForm.username.invalid && (addForm.username.dirty || addForm.username.touched)"
                  class="alert alert-danger">
                  <div *ngIf="addForm.username.errors.required">
                    {{'vif.message.username_require' | translate}}
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
        <div class="offset-md-2 col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.password' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <input type="password" formControlName="password" class="form-control" id="pass-id"
                  placeholder="{{'vif.user.password_placeholder' | translate}}">
                <div *ngIf="addForm.password.invalid && (addForm.password.dirty || addForm.password.touched)"
                  class="alert alert-danger">
                  <div *ngIf="addForm.password.errors.required">
                    {{'vif.message.password_require' | translate}}
                  </div>
                  <div *ngIf="addForm.password.errors.minlength">
                    {{'vif.message.password_minlength' | translate}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.email' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <input type="text" formControlName="email" class="form-control" id="email-id"
                  placeholder="{{'vif.user.email_placeholder' | translate}}">
                <div *ngIf="addForm.email.invalid && (addForm.email.dirty || addForm.email.touched)"
                  class="alert alert-danger">
                  <div *ngIf="addForm.email.errors.required">
                    {{'vif.message.email_require' | translate}}
                  </div>
                  <div *ngIf="addForm.email.errors.email">
                    {{'vif.message.email_invalid' | translate}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="offset-md-2 col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.confirm_password' | translate}}<span
                  class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <input type="password" formControlName="confirmPassword" class="form-control" id="pass-confirm-id"
                  placeholder="{{'vif.user.confirm_password' | translate}}">
                <div
                  *ngIf="addForm.confirmPassword.invalid && (addForm.confirmPassword.dirty || addForm.confirmPassword.touched)"
                  class="alert alert-danger">
                  <div *ngIf="addForm.confirmPassword.errors.required">
                    {{'vif.message.password_require' | translate}}
                  </div>
                  <div *ngIf="addForm.confirmPassword.errors.minlength">
                    {{'vif.message.password_minlength' | translate}}
                  </div>
                  <div *ngIf="addForm.confirmPassword.errors.mustMatch">
                    {{'vif.message.password_notmatch' | translate}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.role' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <select id="select1" name="select1" class="form-control" formControlName="role">
                  <option [ngValue]="r.value" *ngFor="let r of roles">{{r.name}}</option>
                </select>
                <div *ngIf="addForm.role.invalid && (addForm.role.dirty || addForm.role.touched)"
                  class="alert alert-danger">
                  <div *ngIf="addForm.role.errors.requireCombo">
                    {{'vif.message.role_require' | translate}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="offset-md-2 col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.status' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <select id="select-status" name="selectStatus" class="form-control" formControlName="status">
                  <option [ngValue]="actFlg.value" *ngFor="let actFlg of status">{{actFlg.name}}</option>
                </select>
                <div *ngIf="addForm.status.invalid && (addForm.status.dirty || addForm.status.touched)"
                  class="alert alert-danger">
                  <div *ngIf="addForm.status.errors.required">
                    {{'vif.message.status_require' | translate}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row pb-3">
        <div class="col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.investor_trans.customer' | translate}}<span
                  class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <ng-select [searchable]="true" formControlName="customerControl" (change)="onChangeCustomer()">
                <ng-option [value]="c.id" *ngFor="let c of customers">{{c.fullName}}</ng-option>
              </ng-select>
              <div
                *ngIf="addForm.customerControl.invalid && (addForm.customerControl.dirty || addForm.customerControl.touched)"
                class="alert alert-danger">
                <div *ngIf="addForm.customerControl.errors.required">
                  {{'vif.investor_trans.customer_required' | translate}}
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="offset-md-2 col-md-5">
          <div class="row">
              <div class="col-md-3">
                  <label for="company">{{'vif.customer.avatar' | translate}}<span
                          class="asterisk">&#42;</span></label>
              </div>
              <div class="col-md-9">
                  <div class="form-group">
                      <input type="file" formControlName="fileAvatar" class="form-control"
                       (change)="showPreviewAvatar($event)" id="identityDocBack-id">
                          <img [src]="localUrlAvatar" *ngIf="localUrlAvatar" class="imgPlaceholder" width="100px" height="100px" >
                  </div>
              </div>
          </div>
      </div>
      </div>

      <div class="card-footer">
        <button class="btn btn-primary" type="submit">{{'vif.global.button.save' | translate}}</button>
        <button class="btn btn-secondary"
          routerLink="/user-management">{{'vif.global.button.cancel' | translate}}</button>
      </div>
    </div>
    <!--[End] Create User-->
  </form>

  <!--[Start] Edit User -->
  <form *ngIf="user && id>0" [formGroup]="editUserForm" (ngSubmit)="onEditSubmit()">
    <div class="card-body" *ngIf="user && id>0">
      <div class="row">
        <div class="col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.username' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <input type="text" formControlName="eUsername" class="form-control" id="username-edit-id"
                  placeholder="{{'vif.user.username_placeholder' | translate}}">
              </div>
            </div>
          </div>
        </div>
        <div class="offset-md-2 col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.email' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <input type="text" formControlName="eEmail" class="form-control" id="email-id"
                  placeholder="{{'vif.user.email_placeholder' | translate}}">
                <div *ngIf="editForm.eEmail.invalid && (editForm.eEmail.dirty || editForm.eEmail.touched)"
                  class="alert alert-danger">
                  <div *ngIf="editForm.eEmail.errors.required">
                    {{'vif.message.email_require' | translate}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.role' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <select id="select1" name="select1" class="form-control" formControlName="eRole">
                  <option [ngValue]="r.value" *ngFor="let r of roles">{{r.name}}</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="offset-md-2 col-md-5">
          <div class="row">
            <div class="col-md-3">
              <label for="company">{{'vif.user.status' | translate}}<span class="asterisk">&#42;</span></label>
            </div>
            <div class="col-md-9">
              <div class="form-group">
                <select id="select-status" name="selectStatus" class="form-control" formControlName="eStatus">
                  <option [ngValue]="actFlg.value" *ngFor="let actFlg of status">{{actFlg.name}}</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <button class="btn btn-primary" type="submit">{{'vif.global.button.update' | translate}}</button>
        <button class="btn btn-secondary"
          routerLink="/user-management">{{'vif.global.button.cancel' | translate}}</button>
      </div>
    </div>
  </form>
  <!--[End] Edit User-->

</div>